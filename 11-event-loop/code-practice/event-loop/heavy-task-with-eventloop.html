<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Practice</title>
</head>
<body>
  <script>
    let i = 0;
    let start = Date.now();

    /* 첫 번째 부분 카운팅: i=1...1000000
    두 번째 부분 카운팅: i=1000001..2000000
    원하는 숫자를 다 셀 때까지 부분 카운팅이 이어짐 */
    function count() {
      // 무거운 작업을 쪼갠 후 이를 수행 (*)
      do {
        i++;
      } while (i % 1e6 != 0);

      if (i == 1e9) {
        alert("처리에 걸린 시간: " + (Date.now() - start) + "ms");
      } else {
        setTimeout(count); // 새로운 호출을 스케줄링 (**)
      }
    }

    count();
  </script>
</body>
</html>