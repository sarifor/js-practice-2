<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Practice</title>
</head>

<body>
  <script>
    // 1. Optional Chaining이 필요한 이유

    // 1.1 주소 정보가 없는 사용자 -> undefined 에러
    let user = {};
    // console.log(user.address.street); // Uncaught TypeError: Cannot read properties of undefined (reading 'street')

    // 1.2 존재하지 않는 Element -> null 에러
    // let html = document.querySelector('.fake-element').innerHTML; // Uncaught TypeError: Cannot read properties of null (reading 'innerHTML')

    // 1.3 && 사용 -> 에러 X
    let user2 = {};
    console.log( user2 && user.address && user.address.street ); // undefined



    // 2. Optional Chaining의 특징

    // 2.1 평가 대상이 undfined, null -> undefined 반환
    let user3 = {};
    console.log( user3?.address?.street ); // undefined

    

    // 3. Optional Chainging 사용 시 주의점

    // 3.1 ?.는 존재하지 않아도 괜찮은 대상에만 사용
    let user4 = {};
    console.log( user4.address?.street ); // undefined

    // 3.2 ?. for 읽기, 삭제, not 쓰기
    let user4_1 = {};
    user4_1?.hobby = "Dancing"; // Uncaught SyntaxError: Invalid left-hand side in assignment



    // 4. 여러 사용법

    // 4.1 존재 여부가 확실치 않은 함수
    let user5 = {
      admin() {
        alert("This is admin account");
      }
    };
    let user6 = {};

    user5.admin?.(); // 메서드 있음 -> This is admin account
    user6.admin?.(); // 메서드 없음 -> 에러 없이 그냥 평가 멈춤

    // 4.2 존재 여부가 확실치 않은 객체
    let user7 = {
      firstName: "Manatsu"
    };
    let user8 = null;
    let key = "firstName";

    alert( user7?.[key] ); // Manatsu
    alert( user8?.[key] ); // undefined
    alert( user7?.[key]?.nanika?.arimasenka?.nakattaraiidesu); // undefined

  </script>
</body>
</html>
